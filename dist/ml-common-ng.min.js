!function(){"use strict";function t(){return function(t){var n=[];for(var r in t)t[r].__key=r,n.push(t[r]);return n}}function n(){return function(t,n,r){return n=n||10,r=r||"...",t.length>n?String(t).substring(0,n-r.length)+r:t}}angular.module("ml.common",[]).filter("object2Array",t).filter("truncate",n)}(),function(){"use strict";angular.module("ml.common").directive("compile",function(t){return function(n,r,e){n.$watch(function(t){return t.$eval(e.compile)},function(e){r.html(e),t(r.contents())(n)})}})}(),function(){"use strict";function t(t){function n(t){var n=["GET","PUT","POST","DELETE"];return n.indexOf(t)>-1}function r(r,e){var a;return a=/^\/v1\//.test(r)?r:"/"+g.apiVersion+r,e=e||{},e.method=e.method||"GET",n(e.method)||(e.headers=e.headers||{},e.headers["X-HTTP-Method-Override"]=e.method,e.method="POST"),t({url:a,data:e.data,method:e.method,params:e.params,headers:e.headers})}function e(t,n){return/^\//.test(t)||(t="/"+t),r("/resources"+t,n)}function a(t,n){var e={};return!n&&t&&t.search?(n=t,t={}):t=t||{},t.format||(t.format="json"),e.params=t,n&&(e.method="POST",e.data=n),r("/search",e)}function o(t,n){return n=n||{},n.uri=t,n.format||(n.format="json"),r("/documents",{params:n})}function u(t,n){return r("/documents",{method:"POST",params:n,data:t}).then(function(t){return t.headers("location")})}function i(t,n){return r("/documents",{method:"PUT",params:n,data:t}).then(function(t){return t.headers("location")})}function s(t,n){return r("/documents",{method:"PATCH",params:{uri:t},data:n}).then(function(t){return t.headers("location")})}function c(t,n){return n=n||{},n.uri=t,r("/documents",{method:"DELETE",params:n})}function l(t,n){var e=["application/sparql-results+json"];return n=n||{},n.query=t,r("/graphs/sparql",{params:n,headers:{Accept:e.join(", ")}})}function p(t,n){var e={params:t};return n&&(e.method="POST",e.data=n),r("/suggest",e)}function m(t,n,e){var a={params:n};return e&&(a.method="POST",a.data=e),r("/values/"+t,a)}function f(t,n){var e="/config/query/"+t;return n&&(e+="/"+n),r(e,{params:{format:"json"}})}var g={apiVersion:"v1"},y={search:a,getDocument:o,createDocument:u,updateDocument:i,patchDocument:s,deleteDocument:c,sparql:l,suggest:p,values:m,extension:e,queryConfig:f,request:r,getSearchOptions:f,callExtension:e,patch:s};return y}angular.module("ml.common").provider("MLRest",function(){this.$get=["$http",t]})}(),function t(n,r,e){function a(u,i){if(!r[u]){if(!n[u]){var s="function"==typeof require&&require;if(!i&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[u]={exports:{}};n[u][0].call(l.exports,function(t){var r=n[u][1][t];return a(r?r:t)},l,l.exports,t,n,r,e)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)a(e[u]);return a}({1:[function(t,n,r){!function(){"use strict";function n(){function t(){var t=a.apply(null,arguments);return{query:{queries:t}}}return{where:t,and:function(){var t=a.apply(null,arguments);return{"and-query":{queries:t}}},or:function(){var t=a.apply(null,arguments);return{"or-query":{queries:t}}},not:function(t){return{"not-query":t}},documentFragment:function(t){return{"document-fragment-query":t}},propertiesFragment:function(t){return{"properties-fragment-query":t}},locksFragment:function(t){return{"locks-fragment-query":t}},collection:function(){var t=a.apply(null,arguments);return{"collection-query":{uri:t}}},directory:function(){var t=a.apply(null,arguments),n=t[t.length-1],r=!0;return(n===!0||n===!1)&&(r=n,t.pop()),1===t.length&&Array.isArray(t[0])&&(t=t[0]),{"directory-query":{uri:t,infinite:r}}},document:function(){var t=a.apply(null,arguments);return{"document-query":{uri:t}}},boost:function(t,n){return{"boost-query":{"matching-query":t,"boosting-query":n}}},qname:function(t,n){var r=a.apply(null,arguments);return 1===r.length?{ns:null,name:r[0]}:{ns:r[0],name:r[1]}},element:function(){var t,n=a.apply(null,arguments);return t=1===n.length?n[0].ns||n[0].name?n[0]:this.qname(n[0]):this.qname(n[0],n[1]),{element:t}},datatype:function(t,n){var r=["anyURI","date","dateTime","dayTimeDuration","decimal","double","float","gDay","gMonth","gMonthDay","gYear","gYearMonth","int","long","string","time","unsignedInt","unsignedLong","yearMonthDuration"];if(!(r.indexOf(t)>-1))throw new Error("Unknown datatype: "+t);return t="xs:"+t,{datatype:t,collation:n}},range:function(){var t={"<":"LT","<=":"LE",">":"GT",">=":"GE","=":"EQ","!=":"NE"},n=a.apply(null,arguments),r=n.shift();r.element||(r={"json-property":r});var e=n.shift(),u=null,i=[];e&&e.datatype?(e={type:e.datatype,collation:e.collation},u=n.shift()):(u=e,e=null),t[u]||(Array.prototype.push.apply(i,a(u)),u=null);var s=[];n.forEach(function(t){t["range-option"]?Array.prototype.push.apply(s,a(t["range-option"])):Array.prototype.push.apply(i,a(t))});var c={"range-query":{"range-operator":t[u]||"EQ",value:i,"range-option":s}};return o(c["range-query"],r,e),c},rangeOptions:function(t,n){var r=a.apply(null,arguments);return{"range-option":r}},term:function(){var t=a.apply(null,arguments);return{"term-query":{text:t}}},ext:r}}var r=t("./query-builder-extensions.js"),e=t("./util.js"),a=e.asArray,o=e.extendObject;angular.module("ml.common").factory("MLQueryBuilder",n)}()},{"./query-builder-extensions.js":2,"./util.js":3}],2:[function(t,n,r){"use strict";var e=t("./util.js"),a=e.asArray,o=e.isObject,u=e.extendObject;n.exports=r={combined:function(t,n,r){return o(n)&&!r&&(r=n,n=null),{search:{query:t&&t.query||t,qtext:n||"",options:r&&r.options||r}}},rangeConstraint:function(t,n,r,e){if(r||e||(r=n,n=null),n&&-1===["LT","LE","GT","GE","EQ","NE"].indexOf(n))throw new Error("invalid rangeConstraint query operator: "+n);return{"range-constraint-query":{"constraint-name":t,"range-operator":n||"EQ",value:a(r),"range-option":a(e)}}},valueConstraint:function(t,n){var r,e={"value-constraint-query":{"constraint-name":t}};return null===n?(r="null",n=[]):(n=a(n),r=typeof n[0],r="string"===r&&"text"||r),e["value-constraint-query"][r]=n,e},wordConstraint:function(t,n){return{"word-constraint-query":{"constraint-name":t,text:a(n)}}},collectionConstraint:function(t,n){return{"collection-constraint-query":{"constraint-name":t,uri:a(n)}}},customConstraint:function(){var t=a.apply(null,arguments),n=t.shift();1===t.length&&Array.isArray(t[0])&&(t=t[0]);var r=t.map(function(t){return o(t)}).reduce(function(t,n){return t&&n}),e={"custom-constraint-query":{"constraint-name":n}};if(r)for(;t.length;)u(e["custom-constraint-query"],t.shift());else e["custom-constraint-query"].text=t.filter(function(t){return!o(t)});return e},geospatialValues:function(){for(var t,n=a.apply(null,arguments),r=[],e=[],o=[],u=[],i=0;i<n.length;i++)t=n[i],t.latitude?r.push(t):t.south?e.push(t):t.radius?o.push(t):t.point&&u.push(t);return{point:r,box:e,circle:o,polygon:u}},geospatialConstraint:function(){var t=a.apply(null,arguments),n=t.shift();1===t.length&&Array.isArray(t[0])&&(t=t[0]);var r=this.geospatialValues.apply(this,t),e={"geospatial-constraint-query":{"constraint-name":n}};return u(e["geospatial-constraint-query"],r),e},constraint:function(t){switch(t){case"value":return this.valueConstraint;case"word":return this.wordConstraint;case"custom":return this.customConstraint;case"collection":return this.collectionConstraint;default:return this.rangeConstraint}},operatorState:function(t,n){return{"operator-state":{"operator-name":t,"state-name":n}}}}},{"./util.js":3}],3:[function(t,n,r){"use strict";n.exports=r={asArray:function(){var t;return t=1===arguments.length?Array.isArray(arguments[0])?arguments[0]:null===arguments[0]||void 0===arguments[0]?[]:[arguments[0]]:[].slice.call(arguments)},isObject:function(t){var n=typeof t;return!!t&&("object"===n||"function"===n)},extendObject:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var e=arguments[r];if(void 0!==e&&null!==e){e=Object(e);for(var a=Object.keys(Object(e)),o=0,u=a.length;u>o;o++){var i=a[o],s=Object.getOwnPropertyDescriptor(e,i);void 0!==s&&s.enumerable&&(n[i]=e[i])}}}return n}}},{}]},{},[1]);