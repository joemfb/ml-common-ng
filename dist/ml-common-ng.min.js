!function(){"use strict";function e(){return function(e){var t=[];for(var n in e)e[n].__key=n,t.push(e[n]);return t}}function t(){return function(e,t,n){return t=t||10,n=n||"...",e.length>t?String(e).substring(0,t-n.length)+n:e}}angular.module("ml.common",[]).filter("object2Array",e).filter("truncate",t)}(),function(){"use strict";angular.module("ml.common").directive("compile",function(e){return function(t,n,r){t.$watch(function(e){return e.$eval(r.compile)},function(r){n.html(r),e(n.contents())(t)})}})}(),function(){"use strict";function e(){function e(){var e=t.apply(null,arguments);return{query:{queries:e}}}return{query:function(){return console.log("Warning, MLQueryBuilder.query is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.where in it's place"),this.where.apply(this,arguments)},text:function(e){return console.log("Warning, MLQueryBuilder.text is deprecated, and will be removed in the next release!\nUse the qtext argument of MLQueryBuilder.ext.combined in it's place"),{qtext:e}},properties:function(e){return console.log("Warning, MLQueryBuilder.properties is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.propertiesFragment in it's place"),this.propertiesFragment.apply(this,arguments)},where:e,and:function(){var e=t.apply(null,arguments);return{"and-query":{queries:e}}},or:function(){var e=t.apply(null,arguments);return{"or-query":{queries:e}}},not:function(e){return{"not-query":e}},documentFragment:function(e){return{"document-fragment-query":e}},propertiesFragment:function(e){return{"properties-fragment-query":e}},locksFragment:function(e){return{"locks-fragment-query":e}},directory:function(){var e=t.apply(null,arguments),n=e[e.length-1],r=!0;return(n===!0||n===!1)&&(r=n,e.pop()),1===e.length&&Array.isArray(e[0])&&(e=e[0]),{"directory-query":{uri:e,infinite:r}}},document:function(){var e=t.apply(null,arguments);return{"document-query":{uri:e}}},boost:function(e,t){return{"boost-query":{"matching-query":e,"boosting-query":t}}},term:function(){var e=t.apply(null,arguments);return{"term-query":{text:e}}},range:function(e,t){return console.log("Warning, MLQueryBuilder.range is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.rangeConstraint in it's place"),this.ext.rangeConstraint.apply(this.ext,arguments)},collection:function(e,t){return console.log("Warning, MLQueryBuilder.collection is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.collectionConstraint in it's place"),this.ext.collectionConstraint.apply(this.ext,arguments)},custom:function(e,t){return console.log("Warning, MLQueryBuilder.custom is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.customConstraint in it's place"),this.ext.customConstraint.apply(this.ext,arguments)},constraint:function(e){return console.log("Warning, MLQueryBuilder.constraint is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.constraint in it's place"),this.ext.constraint.apply(this.ext,arguments)},operator:function(e,t){return console.log("Warning, MLQueryBuilder.operator is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.operator in it's place"),this.ext.operatorState.apply(this.ext,arguments)},ext:{combined:function(e,t,r){return n(t)&&!r&&(r=t,t=null),{search:{query:e&&e.query||e,qtext:t||"",options:r&&r.options||r}}},rangeConstraint:function(e,n,r,o){if(r||o||(r=n,n=null),n&&-1===["LT","LE","GT","GE","EQ","NE"].indexOf(n))throw new Error("invalid rangeConstraint query operator: "+n);return{"range-constraint-query":{"constraint-name":e,"range-operator":n||"EQ",value:t(r),"range-option":t(o)}}},valueConstraint:function(e,n){var r,o={"value-constraint-query":{"constraint-name":e}};return null===n?(r="null",n=[]):(n=t(n),r=typeof n[0],r="string"===r&&"text"||r),o["value-constraint-query"][r]=n,o},wordConstraint:function(e,n){return{"word-constraint-query":{"constraint-name":e,text:t(n)}}},collectionConstraint:function(e,n){return{"collection-constraint-query":{"constraint-name":e,uri:t(n)}}},customConstraint:function(e,n){return{"custom-constraint-query":{"constraint-name":e,value:t(n)}}},constraint:function(e){switch(e){case"value":return this.valueConstraint;case"word":return this.wordConstraint;case"custom":return this.customConstraint;case"collection":return this.collectionConstraint;default:return this.rangeConstraint}},operatorState:function(e,t){return{"operator-state":{"operator-name":e,"state-name":t}}}}}}function t(){var e;return e=1===arguments.length?Array.isArray(arguments[0])?arguments[0]:null===arguments[0]||void 0===arguments[0]?[]:[arguments[0]]:[].slice.call(arguments)}function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}angular.module("ml.common").factory("MLQueryBuilder",e)}(),function(){"use strict";function e(e){function t(e){var t=["GET","PUT","POST","DELETE"];return t.indexOf(e)>-1}function n(n,r){var o;return o=/^\/v1\//.test(n)?n:"/"+f.apiVersion+n,r=r||{},r.method=r.method||"GET",t(r.method)||(r.headers=r.headers||{},r.headers["X-HTTP-Method-Override"]=r.method,r.method="POST"),e({url:o,data:r.data,method:r.method,params:r.params,headers:r.headers})}function r(e,t){return/^\//.test(e)||(e="/"+e),n("/resources"+e,t)}function o(e,t){var r={};return!t&&e&&e.search?(t=e,e={}):e=e||{},e.format||(e.format="json"),r.params=e,t&&(r.method="POST",r.data=t),n("/search",r)}function a(e,t){return t=t||{},t.uri=e,t.format||(t.format="json"),n("/documents",{params:t})}function u(e,t){return n("/documents",{method:"POST",params:t,data:e}).then(function(e){return e.headers("location")})}function i(e,t){return n("/documents",{method:"PUT",params:t,data:e}).then(function(e){return e.headers("location")})}function s(e,t){return n("/documents",{method:"PATCH",params:{uri:e},data:t}).then(function(e){return e.headers("location")})}function c(e,t){return t=t||{},t.uri=e,n("/documents",{method:"DELETE",params:t})}function l(e,t){var r=["application/sparql-results+json"];return t=t||{},t.query=e,n("/graphs/sparql",{params:t,headers:{Accept:r.join(", ")}})}function m(e,t){var r={params:e};return t&&(r.method="POST",r.data=t),n("/suggest",r)}function d(e,t,r){var o={params:t};return r&&(o.method="POST",o.data=r),n("/values/"+e,o)}function p(e,t){var r="/config/query/"+e;return t&&(r+="/"+t),n(r,{params:{format:"json"}})}var f={apiVersion:"v1"},g={search:o,getDocument:a,createDocument:u,updateDocument:i,patchDocument:s,deleteDocument:c,sparql:l,suggest:m,values:d,extension:r,queryConfig:p,request:n,getSearchOptions:p,callExtension:r,patch:s};return g}angular.module("ml.common").provider("MLRest",function(){this.$get=["$http",e]})}();