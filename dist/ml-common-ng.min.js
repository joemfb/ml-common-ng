!function(){"use strict";function e(){return function(e){var t=[];for(var r in e)e[r].__key=r,t.push(e[r]);return t}}function t(){return function(e,t,r){return t=t||10,r=r||"...",e.length>t?String(e).substring(0,t-r.length)+r:e}}angular.module("ml.common",[]).filter("object2Array",e).filter("truncate",t)}(),function(){"use strict";angular.module("ml.common").directive("compile",function(e){return function(t,r,n){t.$watch(function(e){return e.$eval(n.compile)},function(n){r.html(n),e(r.contents())(t)})}})}(),function(){"use strict";function e(e){function t(e){var t=["GET","PUT","POST","DELETE"];return t.indexOf(e)>-1}function r(r,n){var o;return o=/^\/v1\//.test(r)?r:"/"+f.apiVersion+r,n=n||{},n.method=n.method||"GET",t(n.method)||(n.headers=n.headers||{},n.headers["X-HTTP-Method-Override"]=n.method,n.method="POST"),e({url:o,data:n.data,method:n.method,params:n.params,headers:n.headers})}function n(e,t){return/^\//.test(e)||(e="/"+e),r("/resources"+e,t)}function o(e,t){var n={};return!t&&e&&e.search?(t=e,e={}):e=e||{},e.format||(e.format="json"),n.params=e,t&&(n.method="POST",n.data=t),r("/search",n)}function u(e,t){return t=t||{},t.uri=e,t.format||(t.format="json"),r("/documents",{params:t})}function a(e,t){return r("/documents",{method:"POST",params:t,data:e}).then(function(e){return e.headers("location")})}function i(e,t){return r("/documents",{method:"PUT",params:t,data:e}).then(function(e){return e.headers("location")})}function s(e,t){return r("/documents",{method:"PATCH",params:{uri:e},data:t}).then(function(e){return e.headers("location")})}function c(e,t){return t=t||{},t.uri=e,r("/documents",{method:"DELETE",params:t})}function l(e,t){var n=["application/sparql-results+json"];return t=t||{},t.query=e,r("/graphs/sparql",{params:t,headers:{Accept:n.join(", ")}})}function m(e,t){var n={params:e};return t&&(n.method="POST",n.data=t),r("/suggest",n)}function p(e,t,n){var o={params:t};return n&&(o.method="POST",o.data=n),r("/values/"+e,o)}function d(e,t){var n="/config/query/"+e;return t&&(n+="/"+t),r(n,{params:{format:"json"}})}var f={apiVersion:"v1"},g={search:o,getDocument:u,createDocument:a,updateDocument:i,patchDocument:s,deleteDocument:c,sparql:l,suggest:m,values:p,extension:n,queryConfig:d,request:r,getSearchOptions:d,callExtension:n,patch:s};return g}angular.module("ml.common").provider("MLRest",function(){this.$get=["$http",e]})}(),function e(t,r,n){function o(a,i){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!i&&s)return s(a,!0);if(u)return u(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var u="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){!function(){"use strict";function t(){function e(){var e=n.apply(null,arguments);return{query:{queries:e}}}return{query:function(){return console.log("Warning, MLQueryBuilder.query is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.where in it's place"),this.where.apply(this,arguments)},text:function(e){return console.log("Warning, MLQueryBuilder.text is deprecated, and will be removed in the next release!\nUse the qtext argument of MLQueryBuilder.ext.combined in it's place"),{qtext:e}},properties:function(e){return console.log("Warning, MLQueryBuilder.properties is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.propertiesFragment in it's place"),this.propertiesFragment.apply(this,arguments)},where:e,and:function(){var e=n.apply(null,arguments);return{"and-query":{queries:e}}},or:function(){var e=n.apply(null,arguments);return{"or-query":{queries:e}}},not:function(e){return{"not-query":e}},documentFragment:function(e){return{"document-fragment-query":e}},propertiesFragment:function(e){return{"properties-fragment-query":e}},locksFragment:function(e){return{"locks-fragment-query":e}},directory:function(){var e=n.apply(null,arguments),t=e[e.length-1],r=!0;return(t===!0||t===!1)&&(r=t,e.pop()),1===e.length&&Array.isArray(e[0])&&(e=e[0]),{"directory-query":{uri:e,infinite:r}}},document:function(){var e=n.apply(null,arguments);return{"document-query":{uri:e}}},boost:function(e,t){return{"boost-query":{"matching-query":e,"boosting-query":t}}},term:function(){var e=n.apply(null,arguments);return{"term-query":{text:e}}},range:function(e,t){return console.log("Warning, MLQueryBuilder.range is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.rangeConstraint in it's place"),this.ext.rangeConstraint.apply(this.ext,arguments)},collection:function(e,t){return console.log("Warning, MLQueryBuilder.collection is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.collectionConstraint in it's place"),this.ext.collectionConstraint.apply(this.ext,arguments)},custom:function(e,t){return console.log("Warning, MLQueryBuilder.custom is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.customConstraint in it's place"),this.ext.customConstraint.apply(this.ext,arguments)},constraint:function(e){return console.log("Warning, MLQueryBuilder.constraint is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.constraint in it's place"),this.ext.constraint.apply(this.ext,arguments)},operator:function(e,t){return console.log("Warning, MLQueryBuilder.operator is deprecated, and will be removed in the next release!\nUse MLQueryBuilder.ext.operator in it's place"),this.ext.operatorState.apply(this.ext,arguments)},ext:r}}var r=e("./query-builder-extensions.js"),n=e("./util.js").asArray;angular.module("ml.common").factory("MLQueryBuilder",t)}()},{"./query-builder-extensions.js":2,"./util.js":3}],2:[function(e,t,r){"use strict";var n=e("./util.js"),o=n.asArray,u=n.isObject,a=n.extendObject;t.exports=r={combined:function(e,t,r){return u(t)&&!r&&(r=t,t=null),{search:{query:e&&e.query||e,qtext:t||"",options:r&&r.options||r}}},rangeConstraint:function(e,t,r,n){if(r||n||(r=t,t=null),t&&-1===["LT","LE","GT","GE","EQ","NE"].indexOf(t))throw new Error("invalid rangeConstraint query operator: "+t);return{"range-constraint-query":{"constraint-name":e,"range-operator":t||"EQ",value:o(r),"range-option":o(n)}}},valueConstraint:function(e,t){var r,n={"value-constraint-query":{"constraint-name":e}};return null===t?(r="null",t=[]):(t=o(t),r=typeof t[0],r="string"===r&&"text"||r),n["value-constraint-query"][r]=t,n},wordConstraint:function(e,t){return{"word-constraint-query":{"constraint-name":e,text:o(t)}}},collectionConstraint:function(e,t){return{"collection-constraint-query":{"constraint-name":e,uri:o(t)}}},customConstraint:function(){var e=o.apply(null,arguments),t=e.shift();1===e.length&&Array.isArray(e[0])&&(e=e[0]);var r=e.map(function(e){return u(e)}).reduce(function(e,t){return e&&t}),n={"custom-constraint-query":{"constraint-name":t}};if(r)for(;e.length;)a(n["custom-constraint-query"],e.shift());else n["custom-constraint-query"].text=e.filter(function(e){return!u(e)});return n},geospatialValues:function(){for(var e,t=o.apply(null,arguments),r=[],n=[],u=[],a=[],i=0;i<t.length;i++)e=t[i],e.latitude?r.push(e):e.south?n.push(e):e.radius?u.push(e):e.point&&a.push(e);return{point:r,box:n,circle:u,polygon:a}},geospatialConstraint:function(){var e=o.apply(null,arguments),t=e.shift();1===e.length&&Array.isArray(e[0])&&(e=e[0]);var r=this.geospatialValues.apply(this,e),n={"geospatial-constraint-query":{"constraint-name":t}};return a(n["geospatial-constraint-query"],r),n},constraint:function(e){switch(e){case"value":return this.valueConstraint;case"word":return this.wordConstraint;case"custom":return this.customConstraint;case"collection":return this.collectionConstraint;default:return this.rangeConstraint}},operatorState:function(e,t){return{"operator-state":{"operator-name":e,"state-name":t}}}}},{"./util.js":3}],3:[function(e,t,r){"use strict";t.exports=r={asArray:function(){var e;return e=1===arguments.length?Array.isArray(arguments[0])?arguments[0]:null===arguments[0]||void 0===arguments[0]?[]:[arguments[0]]:[].slice.call(arguments)},isObject:function(e){var t=typeof e;return!!e&&("object"===t||"function"===t)},extendObject:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n){n=Object(n);for(var o=Object.keys(Object(n)),u=0,a=o.length;a>u;u++){var i=o[u],s=Object.getOwnPropertyDescriptor(n,i);void 0!==s&&s.enumerable&&(t[i]=n[i])}}}return t}}},{}]},{},[1]);